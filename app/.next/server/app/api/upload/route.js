"use strict";(()=>{var e={};e.id=5998,e.ids=[5998],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},55315:e=>{e.exports=require("path")},5058:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var a={};t.r(a),t.d(a,{POST:()=>m,dynamic:()=>d});var o=t(49303),s=t(88716),i=t(60670),n=t(87070);let p=require("fs/promises");var u=t(55315),l=t(84770);let d="force-dynamic";async function m(e){try{let r=(await e.formData()).get("file");if(!r)return n.NextResponse.json({error:"No file provided"},{status:400});if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type))return n.NextResponse.json({error:"Invalid file type. Only JPEG, PNG, and WebP are allowed."},{status:400});if(r.size>5242880)return n.NextResponse.json({error:"File too large. Maximum size is 5MB."},{status:400});if(r.size<1024)return n.NextResponse.json({error:"File too small. Please upload a proper image file."},{status:400});let t=Date.now(),a=(0,l.randomBytes)(8).toString("hex"),o=r.name.split(".").pop()||"jpg",s=`${t}-${a}.${o}`,i=await r.arrayBuffer(),d=Buffer.from(i);try{if(d.length<1024)return n.NextResponse.json({error:"Invalid image file. Please upload a proper image."},{status:400})}catch(e){return n.NextResponse.json({error:"Invalid image file format."},{status:400})}let m=(0,u.join)(process.cwd(),"public","uploads","venues"),c=(0,u.join)(m,s);await (0,p.writeFile)(c,d);let f=`/uploads/venues/${s}`;return n.NextResponse.json({success:!0,url:f,filename:r.name,size:r.size,type:r.type,savedAs:s})}catch(e){return console.error("Error uploading file:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/upload/route",pathname:"/api/upload",filename:"route",bundlePath:"app/api/upload/route"},resolvedPagePath:"/home/ubuntu/sully-booking-system/app/app/api/upload/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:g,serverHooks:x}=c,v="/api/upload/route";function y(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,5972],()=>t(5058));module.exports=a})();