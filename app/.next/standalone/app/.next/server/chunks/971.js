exports.id=971,exports.ids=[971],exports.modules={21111:(e,s,a)=>{Promise.resolve().then(a.bind(a,58767))},58767:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var t=a(10326),r=a(17577),i=a(35047),n=a(90434),l=a(90772),d=a(567),c=a(29798),o=a(8122),m=a(77636),x=a(26754),u=a(92498),f=a(28916),h=a(94019),g=a(71810),b=a(90748),v=a(58038),p=a(6507),N=a(70209),j=a(94215);function y({children:e}){let{user:s,logout:a,loading:y}=(0,N.a)(),w=(0,i.useRouter)(),{toast:z}=(0,j.pm)(),[k,C]=(0,r.useState)(!1),[Z,R]=(0,r.useState)([]),[S,P]=(0,r.useState)(!1),A=async e=>{try{(await fetch(`/api/notifications/${e}/read`,{method:"PUT"})).ok&&R(s=>s.map(s=>s.id===e?{...s,isRead:!0}:s))}catch(e){console.error("Failed to mark notification as read:",e)}},D=async()=>{try{await a(),w.push("/")}catch(e){z({title:"Error",description:"Failed to logout. Please try again.",variant:"destructive"})}};if(y)return t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!s)return null;let V=[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"Bookings",href:"/dashboard/bookings",icon:o.Z},{name:"Venues",href:"/dashboard/venues",icon:m.Z},{name:"Analytics",href:"/dashboard/analytics",icon:x.Z},{name:"Widgets",href:"/dashboard/widgets",icon:u.Z},{name:"Subscription",href:"/dashboard/subscription",icon:f.Z}],F=Z.filter(e=>!e.isRead).length;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[k&&t.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>C(!1)}),(0,t.jsxs)("div",{className:`
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0
        ${k?"translate-x-0":"-translate-x-full"}
      `,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(o.Z,{className:"h-8 w-8 text-blue-600"}),t.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Sully"})]}),t.jsx(l.z,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>C(!1),children:t.jsx(h.Z,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[t.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:V.map(e=>(0,t.jsxs)(n.default,{href:e.href,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 hover:text-gray-900 transition-colors",onClick:()=>C(!1),children:[t.jsx(e.icon,{className:"h-5 w-5 mr-3"}),e.name]},e.name))}),(0,t.jsxs)("div",{className:"p-4 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[t.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm font-medium",children:s.firstName?.charAt(0)||s.email.charAt(0)})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900 truncate",children:[s.firstName," ",s.lastName]}),t.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.email})]})]}),(0,t.jsxs)(l.z,{variant:"outline",size:"sm",className:"w-full",onClick:D,children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})]}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[t.jsx("div",{className:"sticky top-0 z-30 bg-white shadow-sm border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 sm:px-6",children:[t.jsx(l.z,{variant:"ghost",size:"sm",className:"lg:hidden",onClick:()=>C(!0),children:t.jsx(b.Z,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[s?.role==="SUPER_ADMIN"&&t.jsx(n.default,{href:"/admin",children:(0,t.jsxs)(l.z,{variant:"outline",size:"sm",className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100",children:[t.jsx(v.Z,{className:"h-4 w-4 mr-2"}),"Admin Panel"]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(l.z,{variant:"ghost",size:"sm",onClick:()=>P(!S),className:"relative",children:[t.jsx(p.Z,{className:"h-5 w-5"}),F>0&&t.jsx(d.C,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs",children:F})]}),S&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border z-50",children:[t.jsx("div",{className:"p-4 border-b",children:t.jsx("h3",{className:"text-lg font-medium",children:"Notifications"})}),t.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===Z.length?t.jsx("div",{className:"p-4 text-center text-gray-500",children:"No notifications"}):Z.map(e=>t.jsx("div",{className:`p-4 border-b hover:bg-gray-50 cursor-pointer ${e.isRead?"":"bg-blue-50"}`,onClick:()=>A(e.id),children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),t.jsx("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.createdAt).toLocaleDateString()})]}),!e.isRead&&t.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full ml-2 mt-1"})]})},e.id))})]})]}),t.jsx(n.default,{href:"/book",children:t.jsx(l.z,{variant:"outline",size:"sm",children:"View Public Site"})})]})]})}),t.jsx("main",{className:"p-6",children:e})]}),S&&t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>P(!1)})]})}},567:(e,s,a)=>{"use strict";a.d(s,{C:()=>l});var t=a(10326);a(17577);var r=a(28671),i=a(77863);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...a}){return t.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...a})}},90772:(e,s,a)=>{"use strict";a.d(s,{d:()=>d,z:()=>c});var t=a(10326),r=a(17577),i=a(34214),n=a(28671),l=a(77863);let d=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...n},c)=>{let o=r?i.g7:"button";return t.jsx(o,{className:(0,l.cn)(d({variant:s,size:a,className:e})),ref:c,...n})});c.displayName="Button"},33071:(e,s,a)=>{"use strict";a.d(s,{Ol:()=>l,SZ:()=>c,Zb:()=>n,aY:()=>o,ll:()=>d});var t=a(10326),r=a(17577),i=a(77863);let n=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let l=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...s}));l.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},a)=>t.jsx("h3",{ref:a,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle";let c=r.forwardRef(({className:e,...s},a)=>t.jsx("p",{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",e),...s}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},a)=>t.jsx("div",{ref:a,className:(0,i.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},13321:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/home/ubuntu/sully-booking-system/app/app/dashboard/layout.tsx#default`)}};