(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5458:function(e,s,t){Promise.resolve().then(t.bind(t,9725))},9725:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(7437),l=t(2265),i=t(6413),n=t(9376),r=t(6070),c=t(2869),d=t(5974),o=t(8501),x=t(5466),m=t(7692),h=t(5805),u=t(44),j=t(8226),p=t(525),f=t(4401),g=t(7648),y=t(429),N=t(5153);function b(){let{user:e,loading:s,logout:t}=(0,i.a)(),b=(0,n.useRouter)(),{toast:v}=(0,N.pm)(),[w,S]=(0,l.useState)(null),[Z,k]=(0,l.useState)([]),[A,O]=(0,l.useState)([]),[E,M]=(0,l.useState)(!0);(0,l.useEffect)(()=>{s||e&&"SUPER_ADMIN"===e.role||b.push("/dashboard")},[e,s,b]),(0,l.useEffect)(()=>{e&&"SUPER_ADMIN"===e.role&&T()},[e]);let T=async()=>{try{let e=await fetch("/api/admin/stats");if(e.ok){let s=await e.json();S(s.stats),k(s.recentBookings),O(s.recentUsers)}}catch(e){console.error("Failed to fetch admin data:",e)}finally{M(!1)}},_=async()=>{try{await t(),v({title:"Signed out successfully",description:"You have been logged out."})}catch(e){v({title:"Error",description:"Failed to sign out. Please try again.",variant:"destructive"})}};return s||!e||"SUPER_ADMIN"!==e.role?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(g.default,{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:"Sully"})]}),(0,a.jsx)(d.C,{variant:"secondary",children:"Admin Panel"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["Welcome, ",e.firstName,"!"]}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>b.push("/dashboard"),children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Venue Management"]}),(0,a.jsxs)(c.z,{variant:"outline",size:"sm",onClick:_,children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor and manage the entire Sully booking system"})]}),E?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>(0,a.jsxs)(r.Zb,{className:"animate-pulse",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,a.jsx)("div",{className:"h-4 w-4 bg-gray-200 rounded"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]},e))}):(0,a.jsxs)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Users"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==w?void 0:w.totalUsers)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Registered users"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Venues"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==w?void 0:w.totalVenues)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active venues"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Bookings"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==w?void 0:w.totalBookings)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time bookings"})]})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Active Subscriptions"}),(0,a.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==w?void 0:w.activeSubscriptions)||0}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Paying customers"})]})]})]}),(0,a.jsxs)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(g.default,{href:"/admin/users",children:(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Manage Users"}),(0,a.jsx)(h.Z,{className:"h-4 w-4 ml-auto text-blue-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"View, enable/disable, and manage all system users"})})]})}),(0,a.jsx)(g.default,{href:"/admin/venues",children:(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Manage Venues"}),(0,a.jsx)(u.Z,{className:"h-4 w-4 ml-auto text-green-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Oversee all venues, owners, and venue settings"})})]})}),(0,a.jsxs)(r.Zb,{className:"opacity-50 cursor-not-allowed",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"System Analytics"}),(0,a.jsx)(p.Z,{className:"h-4 w-4 ml-auto text-purple-600"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Advanced analytics coming soon"})})]}),(0,a.jsx)(g.default,{href:"/admin/system",children:(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"System Settings"}),(0,a.jsx)(f.Z,{className:"h-4 w-4 ml-auto text-orange-600 group-hover:scale-110 transition-transform"})]}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure system settings and platform options"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Recent Bookings"})]}),(0,a.jsx)(r.SZ,{children:"Latest booking activity across all venues"})]}),(0,a.jsx)(r.aY,{children:0===Z.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent bookings"}):(0,a.jsx)("div",{className:"space-y-3",children:Z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.customerName}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.venue.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e.status}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:new Date(e.date).toLocaleDateString()})]})]},e.id))})})]})}),(0,a.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[(0,a.jsxs)(r.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Recent Users"})]}),(0,a.jsx)(r.SZ,{children:"Newly registered users"})]}),(0,a.jsx)(r.aY,{children:0===A.length?(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent users"}):(0,a.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-sm",children:[e.firstName," ",e.lastName]}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.email})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)(d.C,{variant:"outline",className:"text-xs",children:e.role}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:new Date(e.createdAt).toLocaleDateString()})]})]},e.id))})})]})})]})]})]})}},5153:function(e,s,t){"use strict";t.d(s,{pm:function(){return m}});var a=t(2265);let l=0,i=new Map,n=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},r=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],d={toasts:[]};function o(e){d=r(d,e),c.forEach(e=>{e(d)})}function x(e){let{...s}=e,t=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=a.useState(d);return a.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:x,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},4401:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},44:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},8226:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}},function(e){e.O(0,[8590,4671,429,7869,2971,2117,1744],function(){return e(e.s=5458)}),_N_E=e.O()}]);