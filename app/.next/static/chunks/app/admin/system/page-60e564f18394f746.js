(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8407],{8311:function(e,s,t){Promise.resolve().then(t.bind(t,8960))},8960:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var a=t(7437),r=t(2265),i=t(6413),n=t(9376),l=t(6070),c=t(2869),o=t(5186),d=t(6815),u=t(1828),m=t(6818),f=t(6512),x=t(2660),h=t(9202),p=t(8906),g=t(8728),y=t(6137),j=t(91),b=t(7648),v=t(429),N=t(4438);function w(){let{user:e,loading:s}=(0,i.a)(),t=(0,n.useRouter)(),[w,k]=(0,r.useState)({siteName:"Sully Booking System",siteDescription:"Professional venue booking and management platform",supportEmail:"support@sully.com",maintenanceMode:!1,allowRegistrations:!0,requireEmailVerification:!0,maxVenuesPerUser:5,defaultSubscriptionPlan:"FREE",systemNotifications:!0}),[S,C]=(0,r.useState)(!0),[E,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s||e&&"SUPER_ADMIN"===e.role||t.push("/dashboard")},[e,s,t]),(0,r.useEffect)(()=>{e&&"SUPER_ADMIN"===e.role&&R()},[e]);let R=async()=>{try{C(!0);let e=await fetch("/api/admin/system/settings");if(e.ok){let s=await e.json();k(s.settings)}}catch(e){console.error("Failed to fetch system settings:",e)}finally{C(!1)}},A=async()=>{try{P(!0),(await fetch("/api/admin/system/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:w})})).ok?N.Am.success("System settings saved successfully"):N.Am.error("Failed to save system settings")}catch(e){console.error("Failed to save settings:",e),N.Am.error("Failed to save system settings")}finally{P(!1)}},Z=async()=>{try{(await fetch("/api/admin/system/cache",{method:"DELETE"})).ok?N.Am.success("System cache cleared successfully"):N.Am.error("Failed to clear cache")}catch(e){console.error("Failed to clear cache:",e),N.Am.error("Failed to clear cache")}},F=async()=>{try{(await fetch("/api/admin/system/maintenance",{method:"POST"})).ok?N.Am.success("Database maintenance completed successfully"):N.Am.error("Failed to run database maintenance")}catch(e){console.error("Failed to run maintenance:",e),N.Am.error("Failed to run database maintenance")}};return s||!e||"SUPER_ADMIN"!==e.role?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(b.default,{href:"/admin",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Back to Admin"})]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"System Settings"})]})})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:S?(0,a.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"General Settings"})]}),(0,a.jsx)(l.SZ,{children:"Configure basic system information and branding"})]}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"siteName",children:"Site Name"}),(0,a.jsx)(o.I,{id:"siteName",value:w.siteName,onChange:e=>k(s=>({...s,siteName:e.target.value}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"supportEmail",children:"Support Email"}),(0,a.jsx)(o.I,{id:"supportEmail",type:"email",value:w.supportEmail,onChange:e=>k(s=>({...s,supportEmail:e.target.value}))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"siteDescription",children:"Site Description"}),(0,a.jsx)(m.g,{id:"siteDescription",value:w.siteDescription,onChange:e=>k(s=>({...s,siteDescription:e.target.value})),rows:3})]})]})]})}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Security & Access"})]}),(0,a.jsx)(l.SZ,{children:"Configure user registration and security settings"})]}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{children:"Maintenance Mode"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Temporarily disable the platform for maintenance"})]}),(0,a.jsx)(u.r,{checked:w.maintenanceMode,onCheckedChange:e=>k(s=>({...s,maintenanceMode:e}))})]}),(0,a.jsx)(f.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{children:"Allow New Registrations"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register for accounts"})]}),(0,a.jsx)(u.r,{checked:w.allowRegistrations,onCheckedChange:e=>k(s=>({...s,allowRegistrations:e}))})]}),(0,a.jsx)(f.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{children:"Require Email Verification"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Require users to verify their email before accessing the platform"})]}),(0,a.jsx)(u.r,{checked:w.requireEmailVerification,onCheckedChange:e=>k(s=>({...s,requireEmailVerification:e}))})]}),(0,a.jsx)(f.Z,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(d._,{children:"System Notifications"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Send system notifications to administrators"})]}),(0,a.jsx)(u.r,{checked:w.systemNotifications,onCheckedChange:e=>k(s=>({...s,systemNotifications:e}))})]})]})]})}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Platform Limits"})]}),(0,a.jsx)(l.SZ,{children:"Configure platform usage limits and defaults"})]}),(0,a.jsx)(l.aY,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"maxVenues",children:"Max Venues Per User"}),(0,a.jsx)(o.I,{id:"maxVenues",type:"number",min:"1",max:"100",value:w.maxVenuesPerUser,onChange:e=>k(s=>({...s,maxVenuesPerUser:parseInt(e.target.value)||1}))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d._,{htmlFor:"defaultPlan",children:"Default Subscription Plan"}),(0,a.jsxs)("select",{id:"defaultPlan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:w.defaultSubscriptionPlan,onChange:e=>k(s=>({...s,defaultSubscriptionPlan:e.target.value})),children:[(0,a.jsx)("option",{value:"FREE",children:"Free"}),(0,a.jsx)("option",{value:"PREMIUM",children:"Premium"}),(0,a.jsx)("option",{value:"PAID",children:"Paid"})]})]})]})})]})}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsxs)(l.Ol,{children:[(0,a.jsxs)(l.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"System Maintenance"})]}),(0,a.jsx)(l.SZ,{children:"Perform system maintenance tasks and optimizations"})]}),(0,a.jsxs)(l.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(c.z,{variant:"outline",onClick:Z,className:"flex items-center space-x-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Clear System Cache"})]}),(0,a.jsxs)(c.z,{variant:"outline",onClick:F,className:"flex items-center space-x-2",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Run Database Maintenance"})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Note:"})," Maintenance operations may temporarily affect system performance. It's recommended to run these during low-traffic periods."]})})]})]})}),(0,a.jsx)(v.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex justify-end",children:(0,a.jsx)(c.z,{onClick:A,disabled:E,className:"px-8",children:E?"Saving...":"Save Settings"})})]})})]})}},6413:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return n},a:function(){return l}});var a=t(7437),r=t(2265);let i=(0,r.createContext)(void 0);function n(e){let{children:s}=e,[t,n]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c(!1)},[]);let o=async(e,s)=>!1,d=async e=>!1;return(0,a.jsx)(i.Provider,{value:{user:t,loading:l,login:o,logout:()=>{n(null)},register:d},children:s})}function l(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2869:function(e,s,t){"use strict";t.d(s,{d:function(){return c},z:function(){return o}});var a=t(7437),r=t(2265),i=t(7053),n=t(7712),l=t(4508);let c=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:o=!1,...d}=e,u=o?i.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(c({variant:r,size:n,className:t})),ref:s,...d})});o.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var a=t(7437),r=t(2265),i=t(4508);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return n}});var a=t(7437),r=t(2265),i=t(4508);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},6815:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var a=t(7437),r=t(2265),i=t(6394),n=t(7712),l=t(4508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.f,{ref:s,className:(0,l.cn)(c(),t),...r})});o.displayName=i.f.displayName},6512:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(7437),r=t(2265),i=t(5156),n=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...c}=e;return(0,a.jsx)(i.f,{ref:s,decorative:l,orientation:r,className:(0,n.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...c})});l.displayName=i.f.displayName},1828:function(e,s,t){"use strict";t.d(s,{r:function(){return l}});var a=t(7437),r=t(2265),i=t(721),n=t(4508);let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,a.jsx)(i.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=i.fC.displayName},6818:function(e,s,t){"use strict";t.d(s,{g:function(){return n}});var a=t(7437),r=t(2265),i=t(4508);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});n.displayName="Textarea"},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return i}});var a=t(1994),r=t(3335);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[8590,7648,429,8166,6298,2971,2117,1744],function(){return e(e.s=8311)}),_N_E=e.O()}]);