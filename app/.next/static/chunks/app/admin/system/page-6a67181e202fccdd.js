(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8407],{8311:function(e,s,t){Promise.resolve().then(t.bind(t,8960))},8960:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return v}});var r=t(7437),a=t(2265),n=t(6413),i=t(9376),o=t(6070),l=t(2869),c=t(5186),d=t(6815),u=t(1828),m=t(6818),f=t(6512),h=t(2660),x=t(9202),p=t(8906),g=t(8728),N=t(6137),D=t(91),y=t(7648),j=t(429),b=t(4438);function v(){let{user:e,loading:s}=(0,n.a)(),t=(0,i.useRouter)(),[v,w]=(0,a.useState)({siteName:"Sully Booking System",siteDescription:"Professional venue booking and management platform",supportEmail:"support@sully.com",maintenanceMode:!1,allowRegistrations:!0,requireEmailVerification:!0,maxVenuesPerUser:5,defaultSubscriptionPlan:"FREE",systemNotifications:!0}),[T,E]=(0,a.useState)(!0),[R,A]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s||e&&"SUPER_ADMIN"===e.role||t.push("/dashboard")},[e,s,t]),(0,a.useEffect)(()=>{e&&"SUPER_ADMIN"===e.role&&F()},[e]);let F=async()=>{try{E(!0);let e=await fetch("/api/admin/system/settings");if(e.ok){let s=await e.json();w(s.settings)}}catch(e){console.error("Failed to fetch system settings:",e)}finally{E(!1)}},k=async()=>{try{A(!0),(await fetch("/api/admin/system/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:v})})).ok?b.A.success("System settings saved successfully"):b.A.error("Failed to save system settings")}catch(e){console.error("Failed to save settings:",e),b.A.error("Failed to save system settings")}finally{A(!1)}},O=async()=>{try{(await fetch("/api/admin/system/cache",{method:"DELETE"})).ok?b.A.success("System cache cleared successfully"):b.A.error("Failed to clear cache")}catch(e){console.error("Failed to clear cache:",e),b.A.error("Failed to clear cache")}},S=async()=>{try{(await fetch("/api/admin/system/maintenance",{method:"POST"})).ok?b.A.success("Database maintenance completed successfully"):b.A.error("Failed to run database maintenance")}catch(e){console.error("Failed to run maintenance:",e),b.A.error("Failed to run database maintenance")}};return s||!e||"SUPER_ADMIN"!==e.role?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(y.default,{href:"/admin",className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[(0,r.jsx)(h.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Back to Admin"})]}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"System Settings"})]})})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:T?(0,r.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"General Settings"})]}),(0,r.jsx)(o.SZ,{children:"Configure basic system information and branding"})]}),(0,r.jsxs)(o.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"siteName",children:"Site Name"}),(0,r.jsx)(c.I,{id:"siteName",value:v.siteName,onChange:e=>w(s=>({...s,siteName:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"supportEmail",children:"Support Email"}),(0,r.jsx)(c.I,{id:"supportEmail",type:"email",value:v.supportEmail,onChange:e=>w(s=>({...s,supportEmail:e.target.value}))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"siteDescription",children:"Site Description"}),(0,r.jsx)(m.g,{id:"siteDescription",value:v.siteDescription,onChange:e=>w(s=>({...s,siteDescription:e.target.value})),rows:3})]})]})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Security & Access"})]}),(0,r.jsx)(o.SZ,{children:"Configure user registration and security settings"})]}),(0,r.jsxs)(o.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(d._,{children:"Maintenance Mode"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Temporarily disable the platform for maintenance"})]}),(0,r.jsx)(u.r,{checked:v.maintenanceMode,onCheckedChange:e=>w(s=>({...s,maintenanceMode:e}))})]}),(0,r.jsx)(f.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(d._,{children:"Allow New Registrations"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow new users to register for accounts"})]}),(0,r.jsx)(u.r,{checked:v.allowRegistrations,onCheckedChange:e=>w(s=>({...s,allowRegistrations:e}))})]}),(0,r.jsx)(f.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(d._,{children:"Require Email Verification"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Require users to verify their email before accessing the platform"})]}),(0,r.jsx)(u.r,{checked:v.requireEmailVerification,onCheckedChange:e=>w(s=>({...s,requireEmailVerification:e}))})]}),(0,r.jsx)(f.Z,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(d._,{children:"System Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Send system notifications to administrators"})]}),(0,r.jsx)(u.r,{checked:v.systemNotifications,onCheckedChange:e=>w(s=>({...s,systemNotifications:e}))})]})]})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Platform Limits"})]}),(0,r.jsx)(o.SZ,{children:"Configure platform usage limits and defaults"})]}),(0,r.jsx)(o.aY,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"maxVenues",children:"Max Venues Per User"}),(0,r.jsx)(c.I,{id:"maxVenues",type:"number",min:"1",max:"100",value:v.maxVenuesPerUser,onChange:e=>w(s=>({...s,maxVenuesPerUser:parseInt(e.target.value)||1}))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"defaultPlan",children:"Default Subscription Plan"}),(0,r.jsxs)("select",{id:"defaultPlan",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:v.defaultSubscriptionPlan,onChange:e=>w(s=>({...s,defaultSubscriptionPlan:e.target.value})),children:[(0,r.jsx)("option",{value:"FREE",children:"Free"}),(0,r.jsx)("option",{value:"PREMIUM",children:"Premium"}),(0,r.jsx)("option",{value:"PAID",children:"Paid"})]})]})]})})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)(N.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"System Maintenance"})]}),(0,r.jsx)(o.SZ,{children:"Perform system maintenance tasks and optimizations"})]}),(0,r.jsxs)(o.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(l.z,{variant:"outline",onClick:O,className:"flex items-center space-x-2",children:[(0,r.jsx)(D.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Clear System Cache"})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:S,className:"flex items-center space-x-2",children:[(0,r.jsx)(D.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Run Database Maintenance"})]})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,r.jsx)("strong",{children:"Note:"})," Maintenance operations may temporarily affect system performance. It's recommended to run these during low-traffic periods."]})})]})]})}),(0,r.jsx)(j.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"flex justify-end",children:(0,r.jsx)(l.z,{onClick:k,disabled:R,className:"px-8",children:R?"Saving...":"Save Settings"})})]})})]})}},6413:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return o},a:function(){return l}});var r=t(7437),a=t(2265),n=t(9376);let i=(0,a.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),d=(0,n.useRouter)(),u=async()=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] Starting auth check");try{let e=await fetch("/api/auth/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},cache:"no-store"});if(console.log("\uD83D\uDD35 [AUTH-FRONTEND] Auth check response status:",e.status),console.log("\uD83D\uDD35 [AUTH-FRONTEND] Auth check response headers:",Object.fromEntries(e.headers.entries())),e.ok){let s=await e.json();console.log("\uD83D\uDD35 [AUTH-FRONTEND] Auth check response data:",s),o(s.user),s.user?console.log("\uD83D\uDFE2 [AUTH-FRONTEND] User authenticated:",s.user.email):console.log("\uD83D\uDD35 [AUTH-FRONTEND] No user session found")}else{console.error("\uD83D\uDD34 [AUTH-FRONTEND] Auth check server error:",e.status,e.statusText);let s=await e.text();console.error("\uD83D\uDD34 [AUTH-FRONTEND] Error response:",s),o(null)}}catch(e){console.error("\uD83D\uDD34 [AUTH-FRONTEND] Auth check network error:",e),o(null)}finally{c(!1),console.log("\uD83D\uDD35 [AUTH-FRONTEND] Auth check completed")}};(0,a.useEffect)(()=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] AuthProvider mounted, starting initial auth check"),u()},[]);let m=async(e,s)=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] Starting login for:",e);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:s}),credentials:"include",cache:"no-store"});if(console.log("\uD83D\uDD35 [AUTH-FRONTEND] Login response status:",t.status),console.log("\uD83D\uDD35 [AUTH-FRONTEND] Login response headers:",Object.fromEntries(t.headers.entries())),!t.ok){let e=await t.json();throw console.error("\uD83D\uDD34 [AUTH-FRONTEND] Login failed:",e),Error(e.error||"Login failed")}let r=await t.json();console.log("\uD83D\uDD35 [AUTH-FRONTEND] Login response data:",r),o(r.user),console.log("\uD83D\uDFE2 [AUTH-FRONTEND] Login successful for:",r.user.email)}catch(e){throw console.error("\uD83D\uDD34 [AUTH-FRONTEND] Login error:",e),e}},f=async e=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] Starting registration for:",e.email);try{let s=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include",cache:"no-store"});if(console.log("\uD83D\uDD35 [AUTH-FRONTEND] Registration response status:",s.status),console.log("\uD83D\uDD35 [AUTH-FRONTEND] Registration response headers:",Object.fromEntries(s.headers.entries())),!s.ok){let e=await s.json();throw console.error("\uD83D\uDD34 [AUTH-FRONTEND] Registration failed:",e),Error(e.error||"Registration failed")}let t=await s.json();console.log("\uD83D\uDD35 [AUTH-FRONTEND] Registration response data:",t),o(t.user),console.log("\uD83D\uDFE2 [AUTH-FRONTEND] Registration successful for:",t.user.email)}catch(e){throw console.error("\uD83D\uDD34 [AUTH-FRONTEND] Registration error:",e),e}},h=async()=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] Starting logout");try{let e=await fetch("/api/auth/logout",{method:"POST",credentials:"include",cache:"no-store"});console.log("\uD83D\uDD35 [AUTH-FRONTEND] Logout response status:",e.status)}catch(e){console.error("\uD83D\uDD34 [AUTH-FRONTEND] Logout error:",e)}finally{o(null),console.log("\uD83D\uDFE2 [AUTH-FRONTEND] Logout completed, redirecting to home"),d.push("/")}},x=async()=>{console.log("\uD83D\uDD35 [AUTH-FRONTEND] Refreshing user data"),await u()};return(0,r.jsx)(i.Provider,{value:{user:t,loading:l,login:m,register:f,logout:h,refreshUser:x},children:s})}function l(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2869:function(e,s,t){"use strict";t.d(s,{d:function(){return l},z:function(){return c}});var r=t(7437),a=t(2265),n=t(7053),i=t(7712),o=t(4508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:t,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:t})),ref:s,...d})});c.displayName="Button"},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent",a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},5186:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,type:a,...i}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},6815:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var r=t(7437),a=t(2265),n=t(6394),i=t(7712),o=t(4508);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.f,{ref:s,className:(0,o.cn)(l(),t),...a})});c.displayName=n.f.displayName},6512:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var r=t(7437),a=t(2265),n=t(5156),i=t(4508);let o=a.forwardRef((e,s)=>{let{className:t,orientation:a="horizontal",decorative:o=!0,...l}=e;return(0,r.jsx)(n.f,{ref:s,decorative:o,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...l})});o.displayName=n.f.displayName},1828:function(e,s,t){"use strict";t.d(s,{r:function(){return o}});var r=t(7437),a=t(2265),n=t(721),i=t(4508);let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:(0,r.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=n.fC.displayName},6818:function(e,s,t){"use strict";t.d(s,{g:function(){return i}});var r=t(7437),a=t(2265),n=t(4508);let i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...a})});i.displayName="Textarea"},4508:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var r=t(1994),a=t(3335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}}},function(e){e.O(0,[8590,4671,429,4799,6298,2971,2117,1744],function(){return e(e.s=8311)}),_N_E=e.O()}]);